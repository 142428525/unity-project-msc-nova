@<|
label 'test_branch'
-- is_start()
|>
<|
set_box()
|>
这是一个分支节点
@<|
branch {
    { dest = 'test_branch_1', text = '选项1'},
    { dest = 'test_branch_2', text = '选项2'},
    { dest = 'test_branch_3', text = '选项3'},
}
|>

@<|
label 'test_branch_1'
|>
<|
v('flag', 1)
|>
选项1
@<| jump_to 'test_branch_middle' |>

@<|
label 'test_branch_2'
|>
<|
v('flag', 2)
|>
选项2
@<| jump_to 'test_branch_middle' |>

@<|
label 'test_branch_3'
|>
<|
v('flag', 3)
|>
选项3
@<| jump_to 'test_branch_middle' |>

@<|
label 'test_branch_middle'
|>
又一个分支节点，如果刚才选3会直接跳到最后
@<|
branch {
    { dest = 'test_branch_end', text = '普通的选项'},
    { dest = 'test_branch_end', text = '如果刚才选1才会出现', mode = 'show', cond = function()
        return v('flag') == 1
    end },
    { dest = 'test_branch_end', text = '如果刚才选2才能点击', mode = 'enable', cond = function()
        return v('flag') == 2
    end },
    { dest = 'test_branch_end', mode = 'jump', cond = function()
        return v('flag') == 3
    end },
}
|>

@<|
label 'test_branch_end'
|>
测试结束
@<| is_end 'test_branch' |>
