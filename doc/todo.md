# Todo list

目前我们对Nova的开发以自用为主，所以有的功能还不全（比如图片鉴赏），欢迎各位小伙伴贡献代码

* 重构一些代码，消除循环依赖
* 存档中的log不用存储剧本内容，只要存储剧本位置
* 重新设计存档格式以支持存档升级，也许JSON会比较方便
* 重构`DialogueBoxController`
    * 对话框应该是像图片和音乐一样的前端组件，可以不止一个；即使没有对话框，也可以进行推进剧情，快进等操作
* 重构`SaveViewController`，把后端功能放到`BookmarkSaveBehaviour`
* 重构`LogController`，把后端功能拿出来
* 按条件解锁剧情分支/自动跳转
* 剧情分支的翻译
* 脚本中的全局变量
* 图片鉴赏解锁
    * 如果一组图片中只有一部分解锁，这一组的缩略图应该是已解锁的图片中的第一张，还要做一张图表示这一组没有解锁
* 改进图片鉴赏的UI
* 立绘鉴赏
* 重写立绘合成的功能，减少内存占用，允许宽高比不同的立绘
* 简化立绘裁剪的功能，自动生成.meta文件
* 图片鉴赏、音乐鉴赏的配置文件支持纯文本导入/到处
* Log界面支持无限滚动
    * 参考：https://github.com/qiankanglai/LoopScrollRect
* 自动存档
    * 读档/log回跳/返回标题/退出游戏/5分钟内没有存档时
* 手机版杀后台之前自动存档，保存设置
* 支持手柄操作
* 自定义鼠标按键（支持有很多键的鼠标）
* 自动生成文档（包括C#和Lua）
* 存档速度优化
* 启动速度优化
* 改进脚本parser，支持代码块中的空行，文本中的`<| |>`，escape `：：`
* 在脚本中支持类似于`姓名（表情）：：台词`的语法
* Sidechain effects（角色说话时BGM减轻），以及设置项
* 音乐鉴赏单曲循环改成只循环loop部分
* 紧 急 回 避
* 没有耳机时禁止播放声音
* 退出程序时，先把窗口关掉，再在后台慢慢保存数据
    * 否则对于galgame来说可能是致命的
* 画面左侧上下滑动调节亮度，右侧上下滑动调节音量
* F11全屏改成所有view都能用
* 重构`RectTransformAnimationProperty`和`OpacityAnimationProperty`，使其行为与其他AnimationProperty一致
* 用脚本隐藏对话框或改变对话框位置时，有淡入淡出
* 同时存在per dialogue和persistent的动画时，restore时不一定restore所有AnimationProperty
* 局域网内同步存档
* 编辑存档的描述
* 语音收藏
* 流程图
* 跳转到上个/下个选项
* Live2D
* Texture streaming

## 已知的bug

* 读档时应该停止语音
* 自动模式等待时间应该用剩余时间，而不是总时间
